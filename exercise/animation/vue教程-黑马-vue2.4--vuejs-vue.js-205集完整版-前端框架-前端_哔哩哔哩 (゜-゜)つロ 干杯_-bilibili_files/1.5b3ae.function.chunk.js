(window.webpackJsonpwebpackLogReporter=window.webpackJsonpwebpackLogReporter||[]).push([[1],{87:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(r(10)),i=s(r(2)),n=s(r(27)),o=(s(r(41)),s(r(26)));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(e,t){if(!(e instanceof t))try{throw new TypeError("Cannot call a class as a function")}catch(e){}}(this,e),window.abserver){var r=window.abserver;this.setItem(JSON.stringify(r))}else{if(this.isExpired()){var a=i.default.getCookie("buvid3"),o=i.default.getCookie("DedeUserID"),s=n.default.identify();this.fetchInfo({buvid:a,platform:t.abtestPlatform||1,mid:o,channel:s})}else{var u=this.getAbtestInfo();this.setItem(JSON.stringify(u))}}}var t,r,s;return t=e,(r=[{key:"fetchInfo",value:function(e){var t=this;o.default.ajax({url:"//api.bilibili.com/x/web-interface/abserver",data:e,success:function(e){e&&!e.code&&t.setItem(JSON.stringify(e.data))}})}},{key:"getAbtestInfo",value:function(){var e;try{e=JSON.parse(window.localStorage.getItem("ABTEST_INFO"))}catch(e){}return e}},{key:"isExpired",value:function(){var e=this.getAbtestInfo();if(!e||!e.expire)return!0;var t=e.expire;return(new Date).getTime()>=t}},{key:"setItem",value:function(e){var t=JSON.parse(e).hit;window.localStorage.setItem("ABTEST_INFO",e);var r=JSON.stringify(t);window.abtest=r,a.default.updateConfig(),this.todo(r)}},{key:"todo",value:function(e,t,r){var i={};if(localStorage&&localStorage.index_user_setting){var n=JSON.parse(localStorage.index_user_setting).sort;i.msg=JSON.stringify({sort:n})}else window.bsource&&(i.msg=window.bsource);t&&(i.refer_url=t),r&&(i.msg=r),i.abtest=e;var o={type:"abtest",obj:i};a.default.receiveMsg(o)}}])&&u(t.prototype,r),s&&u(t,s),e}();t.default=f}}]);